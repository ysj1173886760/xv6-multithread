Support multithreading for xv6

You can check the detailed design choices [here](http://heavensheep.xyz/?p=213)